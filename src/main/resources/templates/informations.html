<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Informations</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <style>
        .card-text {
            word-wrap: break-word;
        }
    </style>
</head>
<body>
<div class="container">
    <h1 th:text="|Informations in the database|"></h1>
    <hr>
    <form method="get" action="#" th:action="@{/informations/}">
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="filterByStartDate">Filter by start date:</label>
                <input type="date" id="filterByStartDate" name="filterByStartDate" class="form-control" th:value="${selectedFilterByStartDate}">
            </div>
            <div class="form-group col-md-4">
                <label for="filterByEndDate">Filter by end date:</label>
                <input type="date" id="filterByEndDate" name="filterByEndDate" class="form-control" th:value="${selectedFilterByEndDate}">
            </div>
            <div class="form-group col-md-4">
                <label for="categorySelect">Filter by category:</label>
                <select id="categorySelect" name="categoryName" class="form-control">
                    <option value="">All</option>
                    <option th:each="category : ${categories}" th:value="${category.name}" th:selected="${category.name == selectedCategory}" th:text="${category.name}"></option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="sortBySelect">Sort by:</label>
                <select id="sortBySelect" name="sortBy" class="form-control">
                    <option value="name" th:selected="${selectedSortBy == 'name'}">Name</option>
                    <option value="creationTime" th:selected="${selectedSortBy == 'creationTime'}">Creation Time</option>
                    <option value="category" th:selected="${selectedSortBy == 'category'}">Category</option>
                    <option value="categoryOccurrences" th:selected="${selectedSortBy == 'categoryOccurrences'}">Category Occurrences</option>
                </select>
            </div>

            <div class="form-group col-md-6">
                <label for="sortDirectionSelect">Sort direction:</label>
                <select id="sortDirectionSelect" name="sortDirection" class="form-control">
                    <option value="ASC" th:selected="${selectedSortDirection == 'ASC'}">Ascending</option>
                    <option value="DESC" th:selected="${selectedSortDirection == 'DESC'}">Descending</option>
                </select>
            </div>
        </div>

        <button type="submit" class="btn btn-primary" style="color: #ffffff; background-color: #0a0aff;">
            Filter and Sort
        </button>
        <button type="submit" name="resetFilters" value="true" class="btn btn-danger">
            Reset Filters
        </button>
    </form>
    <hr>
    <ol class="list-group">
        <li th:each="information : ${informations}" class="list-group-item">
            <h5 class="card-title" th:text="|Name: ${information.name} |"></h5>
            <p class="card-text">
                <span th:text="|Date: ${information.creationTime} |"></span>
                <br>
                <span th:text="|Category: ${information.category.name} |"></span>
                <br>
                <span th:text="|Description: ${information.description} |"></span>
                <br>
                <span th:if="${information.link != null}">
                    Link:
                <a th:href="${information.link}" target="_blank" th:text="${information.link}"></a>
                <br>
                </span>
                <a th:href="@{edit/{id}(id=${information.id})}" class="btn btn-primary" style="color: #ffffff; background-color: #0a0aff;">
                    Edit
                </a>
                <a th:href="@{delete/{id}(id=${information.id})}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this information?')">
                    Delete
                </a>
            </p>
        </li>
    </ol>


    <a th:href="@{add-information}" class="btn btn-success" style="color: #ffffff; background-color: #146126;">
        Add Information
    </a>
    <a th:href="@{add-category}" class="btn btn-success" style="color: #ffffff; background-color: #146126;">
        Add Category
    </a>
</div>
<footer>
    <div class="container">
        <p>Â© 2023 StoreEverything. All rights reserved.</p>
    </div>
</footer>
</body>
</html>